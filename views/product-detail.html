<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Keybook.live</title>
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="wrapper">
        <!-- Import Header -->
        <div id="header-placeholder"></div>

        <!-- Product Detail Section -->
        <section class="product-detail">
            <div class="container">
                <a href="/products" class="back-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 12H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Back to Products
                </a>
                
                <div class="product-detail-grid">
                    <!-- Product Image -->
                    <div class="product-detail-image" id="productImage">
                        <!-- Product image will be inserted by JavaScript -->
                    </div>
                    
                    <!-- Product Info -->
                    <div class="product-detail-info">
                        <div>
                            <span class="product-detail-category" id="productCategory">Category</span>
                            <h1 class="product-detail-title" id="productTitle">Product Name</h1>
                            <div class="product-detail-price" id="productPrice">$0.00</div>
                        </div>
                        
                        <div class="product-detail-description" id="productDescription">
                            Product description will be loaded here.
                        </div>
                        
                        <div class="product-features">
                            <h3>Key Features</h3>
                            <ul class="feature-list" id="productFeatures">
                                <!-- Features will be inserted by JavaScript -->
                            </ul>
                        </div>
                        
                        <div class="quantity-selector">
                            <span>Quantity:</span>
                            <div class="quantity-controls">
                                <button class="quantity-btn" id="decreaseQuantity">-</button>
                                <div class="quantity-display" id="quantity">1</div>
                                <button class="quantity-btn" id="increaseQuantity">+</button>
                            </div>
                            <span class="quantity-available" id="stockInfo">50 available</span>
                        </div>
                        
                        <div class="product-actions">
                            <button class="btn btn-primary" id="addToCartDetail" data-id="">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-2">
                                    <path d="M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Add to Cart
                            </button>
                            
                            <button class="btn btn-outline" id="buyNowBtn">
                                Buy Now
                            </button>
                        </div>
                        
                        <!-- Trust Elements -->
                        <div class="trust-elements">
                            <div class="trust-element">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <div class="trust-element-title">Secure Payment</div>
                                <div class="trust-element-text">Safe encryption</div>
                            </div>
                            
                            <div class="trust-element">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <div class="trust-element-title">Instant Delivery</div>
                                <div class="trust-element-text">Digital keys via email</div>
                            </div>
                            
                            <div class="trust-element">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <div class="trust-element-title">24/7 Support</div>
                                <div class="trust-element-text">Help when you need it</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Import Footer -->
        <div id="footer-placeholder"></div>
    </div>

    <script src="/js/main.js"></script>
    <script src="/js/cart.js"></script>
    <script>
        // Get product ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id') || window.location.pathname.split('/').pop();
        
        // Load product data
        document.addEventListener('DOMContentLoaded', () => {
            // In a real app, this would fetch from an API
            // For now, we'll use dummy data
            const product = getProductById(productId);
            
            if (product) {
                displayProduct(product);
            } else {
                // Product not found
                window.location.href = '/products';
            }
            
            // Setup quantity controls
            const decreaseBtn = document.getElementById('decreaseQuantity');
            const increaseBtn = document.getElementById('increaseQuantity');
            const quantityDisplay = document.getElementById('quantity');
            let quantity = 1;
            
            decreaseBtn.addEventListener('click', () => {
                if (quantity > 1) {
                    quantity--;
                    quantityDisplay.textContent = quantity;
                }
            });
            
            increaseBtn.addEventListener('click', () => {
                quantity++;
                quantityDisplay.textContent = quantity;
            });
            
            // Add to cart button
            const addToCartBtn = document.getElementById('addToCartDetail');
            addToCartBtn.addEventListener('click', () => {
                addToCartBtn.setAttribute('data-id', product.id);
                cart.addItem({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image
                }, quantity);
                
                showToast(`${product.name} added to cart`, 'success');
            });
            
            // Buy now button
            const buyNowBtn = document.getElementById('buyNowBtn');
            buyNowBtn.addEventListener('click', () => {
                // Add to cart first
                cart.addItem({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image
                }, quantity);
                
                // Redirect to cart
                window.location.href = '/cart';
            });
        });
        
        // Dummy product data function
        function getProductById(id) {
            const products = [
                {
                    id: "1",
                    name: "Windows 11 Pro",
                    description: "Genuine Windows 11 Professional License Key",
                    fullDescription: "Windows 11 Pro includes all the features of Windows 11 Home plus important business functionality for encryption, remote log-in, creating virtual machines, and more. Get all the features of Windows 11, plus additional security and management features.",
                    price: 129.99,
                    category: "Operating Systems",
                    image: "/images/products/windows11.jpg",
                    features: [
                        "Genuine Microsoft Product Key",
                        "Digital Delivery within minutes",
                        "Full version with lifetime license",
                        "Compatible with both 32 and 64-bit systems",
                        "Includes all security updates",
                        "Multi-language support"
                    ],
                    stock: 50
                },
                {
                    id: "2",
                    name: "Microsoft Office 2021",
                    description: "Lifetime license for Office Professional 2021",
                    fullDescription: "Microsoft Office Professional 2021 is designed for professional users who need the full suite of productivity applications. Includes Word, Excel, PowerPoint, Outlook, Publisher, Access, and OneNote for Windows 10 and Windows 11.",
                    price: 199.99,
                    category: "Office Software",
                    image: "/images/products/office2021.jpg",
                    features: [
                        "One-time purchase for 1 PC or Mac",
                        "Classic 2021 versions of Word, Excel, PowerPoint, and Outlook",
                        "Microsoft support included for 60 days at no extra cost",
                        "Compatible with Windows 11, Windows 10, and macOS",
                        "All languages included"
                    ],
                    stock: 35
                },
                {
                    id: "3",
                    name: "Windows 10 Pro",
                    description: "Authentic Windows 10 Professional License",
                    fullDescription: "Windows 10 Pro offers all the features of Windows 10 Home plus important business functionality for encryption, remote log-in, creating virtual machines, and more. Get all the features of Windows 10 Home, plus important business functionality for encryption, remote log-in, creating virtual machines, and more.",
                    price: 99.99,
                    category: "Operating Systems",
                    image: "/images/products/windows10.jpg",
                    features: [
                        "Genuine Microsoft Product Key",
                        "Digital Delivery within minutes",
                        "Full version with lifetime license",
                        "Compatible with both 32 and 64-bit systems",
                        "Includes all security updates",
                        "Multi-language support"
                    ],
                    stock: 75
                }
            ];
            
            return products.find(p => p.id === id);
        }
        
        // Display product data
        function displayProduct(product) {
            document.title = `${product.name} - Keybook.live`;
            
            document.getElementById('productCategory').textContent = product.category;
            document.getElementById('productTitle').textContent = product.name;
            document.getElementById('productPrice').textContent = formatPrice(product.price);
            document.getElementById('productDescription').textContent = product.fullDescription;
            document.getElementById('stockInfo').textContent = `${product.stock} available`;
            
            // Set product image
            const imageContainer = document.getElementById('productImage');
            imageContainer.innerHTML = `<img src="${product.image}" alt="${product.name}">`;
            
            // Set features
            const featuresList = document.getElementById('productFeatures');
            featuresList.innerHTML = '';
            
            product.features.forEach(feature => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    ${feature}
                `;
                featuresList.appendChild(li);
            });
            
            // Set data-id for add to cart button
            document.getElementById('addToCartDetail').setAttribute('data-id', product.id);
        }
        
        // Format price helper function
        function formatPrice(price) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD'
            }).format(price);
        }
    </script>
</body>
</html>